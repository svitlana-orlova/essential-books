<!doctype html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../../assets/main.css" rel="stylesheet">
</head>
<body class="page">
<header class="page__header">
    <div class="page__header__left">
        <a id="link-home" href="../../index.html">
            &nbsp;Essential Books</a>
    </div>
</header>
<div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Command-line arguments</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/6a6ffadba81b4cc6a979f7e1ee4ea4aa" rel="nofollow" target="_blank">suggest change</a>
</div>


      
<p>The command-line arguments AKA command-line parameters passed to a batch script are accessible as <code>%1</code>, <code>%2</code>, ..., <code>%9</code>. There can be more than nine arguments; to access them, see how to loop over all of them below.
</p>
<p>The syntax <code>%0</code> does not refer to a command-line argument but rather to the name of the batch file.
</p>
<p>Testing for whether the first command-line argument has been provided:
</p>

<div class="code-box lang-Shell">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="k">if</span> not -%1-<span class="o">==</span>-- <span class="nb">echo</span> Argument one provided
</span></span><span class="line"><span class="cl"><span class="k">if</span> -%1-<span class="o">==</span>-- <span class="nb">echo</span> Argument one not provided <span class="p">&amp;</span> <span class="nb">exit</span> /b</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>A robust looping over all command-line arguments using <code>SHIFT</code> (for each command-line argument, ...):
</p>

<div class="code-box lang-Shell">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">:argactionstart
</span></span><span class="line"><span class="cl"><span class="k">if</span> -%1-<span class="o">==</span>-- goto argactionend
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> %1 <span class="p">&amp;</span> REM Or <span class="k">do</span> any other thing with the argument
</span></span><span class="line"><span class="cl"><span class="nb">shift</span>
</span></span><span class="line"><span class="cl">goto argactionstart
</span></span><span class="line"><span class="cl">:argactionend</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>A robust looping over all command-line arguments using <code>SHIFT</code> without modifying <code>%1</code>, <code>%2</code>, etc.:
</p>

<div class="code-box lang-Shell">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">call :argactionstart %*
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> Arg one: %1 <span class="p">&amp;</span> REM %1, %2, etc. are unmodified in this location
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> /b
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">:argactionstart
</span></span><span class="line"><span class="cl"><span class="k">if</span> -%1-<span class="o">==</span>-- goto argactionend
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> %1 <span class="p">&amp;</span> REM Or <span class="k">do</span> any other thing with the argument
</span></span><span class="line"><span class="cl"><span class="nb">shift</span>
</span></span><span class="line"><span class="cl">goto argactionstart
</span></span><span class="line"><span class="cl">:argactionend
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> /b</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>Transferring command-line arguments to environment variables:
</p>

<div class="code-box lang-Shell">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">setlocal EnableDelayedExpansion
</span></span><span class="line"><span class="cl">REM Prevent affecting possible callers of the batch
</span></span><span class="line"><span class="cl">REM Without delayed expansion, !arg%argno%! used below won<span class="err">'</span>t work.
</span></span><span class="line"><span class="cl"><span class="nb">set</span> <span class="nv">argcount</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">:argactionstart
</span></span><span class="line"><span class="cl"><span class="k">if</span> -%1-<span class="o">==</span>-- goto argactionend
</span></span><span class="line"><span class="cl"><span class="nb">set</span> /a <span class="nv">argcount</span><span class="o">+=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> arg%argcount%<span class="o">=</span>%1
</span></span><span class="line"><span class="cl"><span class="nb">shift</span>
</span></span><span class="line"><span class="cl">goto argactionstart
</span></span><span class="line"><span class="cl">:argactionend
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">set</span> <span class="nv">argno</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">:loopstart
</span></span><span class="line"><span class="cl"><span class="nb">set</span> /a <span class="nv">argno</span><span class="o">+=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> %argno% gtr %argcount% goto loopend
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> !arg%argno%! <span class="p">&amp;</span> REM Or <span class="k">do</span> any other thing with the argument
</span></span><span class="line"><span class="cl">goto loopstart
</span></span><span class="line"><span class="cl">:loopend</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>Looping over all command-line arguments, albeit not a robust one:
</p>

<div class="code-box lang-Shell">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="k">for</span> %%i in <span class="o">(</span>%*<span class="o">)</span> <span class="k">do</span> <span class="o">(</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> %%i
</span></span><span class="line"><span class="cl"><span class="o">)</span></span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>This looks elegant but is non-robust, maltreating arguments containing wildcards (<code>*</code>, <code>?</code>). In particular, the above for command replaces arguments that contain wildcards (<code>*</code>, <code>?</code>) with file names that match them, or drops them if no files match. Nonetheless, the above loop works as expected as long as the passed arguments do not contain wildcards.
</p>
<p>Finding the number of command-line arguments, in a non-robust way:
</p>

<div class="code-box lang-Shell">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nb">set</span> <span class="nv">argcount</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> %%i in <span class="o">(</span>%*<span class="o">)</span> <span class="k">do</span> <span class="nb">set</span> /a <span class="nv">argcount</span><span class="o">+=</span><span class="m">1</span></span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>
</p>
<p>Again, this does not work with arguments containing wildcards.
</p>
<p>The maximum possible number of arguments is greater than 4000, as empirically determined on a Windows Vista machine. The number can differ on Windows XP and Windows 7.
</p>
<p>In passing arguments to a batch script, characters used for argument separation are the following ones:
</p>
  <ul id="01fea828-b1d2-4694-83df-02ec7ae227d3" class="bulleted-list">
    <li>space
    </li>
    <li>comma
    </li>
    <li>semicolon
    </li>
    <li>equal sign
    </li>
    <li>tab character
    </li>
  </ul>
<p>Thus, the following lines pass the same four arguments:
</p>
  <ul id="131cc76c-6461-4e83-bea7-d40d42519d2c" class="bulleted-list">
    <li><code>test.bat a b c d</code>
    </li>
    <li><code>test.bat a,b,c,d</code>
    </li>
    <li><code>test.bat a, b, c, d</code>
    </li>
    <li><code>test.bat a;b;c;d</code>
    </li>
    <li><code>test.bat a=b=c=d</code>
    </li>
    <li><code>test.bat a b,c;,;=d</code>
    </li>
  </ul>
<p>Yes, even the line with <code>a b,c;,;=d</code> passes four arguments, since a sequence of separating characters is considered a single separator.
</p>
<p>To have a space, comma or semicolon in the argument value, you can pass the value enclosed in quotation marks. However, the quotation marks become part of the argument value. To get rid of the enclosing quotation marks when referring to the argument in the script, you can use <code>%~&lt;number&gt;</code> described in <a href="-percent-tilde-f4263820c2db41e399c77259970464f1.html">percent tilde</a>.
</p>
<p>When passing arguments to an invoked command rather than a batch script, you usually need to separate the command from the first argument using a space. However, for internal commands, that separation is not necessary if the first character after the command name is one of a couple of symbols, including <code>.\/</code>, and more:
</p>
  <ul id="c872a1fe-ac43-4e5a-bd99-9e1ff823a531" class="bulleted-list">
    <li><code>echo.</code>
      <ul id="5c7d6d7a-2b63-46e3-b0cb-4d05c7618c4e" class="bulleted-list">
        <li>Outputs a newline.
        </li>
      </ul>
    </li>
    <li><code>tree.</code>
      <ul id="c0bea190-2663-471d-97e0-a99794247f60" class="bulleted-list">
        <li>Fails: "tree." not found. tree is an external command.
        </li>
      </ul>
    </li>
    <li><code>dir..</code>
      <ul id="1034b2a6-974d-430a-98ba-9429c7c3ee89" class="bulleted-list">
        <li>Lists the content of the parent directory.
        </li>
      </ul>
    </li>
    <li><code>cd..</code>
      <ul id="08438c91-1ae4-4ea5-bb85-46d8c6532c85" class="bulleted-list">
        <li>Changes the current directory to the parent one.
        </li>
      </ul>
    </li>
    <li><code>cd\</code>
      <ul id="e5213af8-340b-4f5e-af94-c79420b364ec" class="bulleted-list">
        <li>Changes the current directory to the root one.
        </li>
      </ul>
    </li>
    <li><code>start.</code>
      <ul id="58778373-1fa6-4073-9b28-69a1b1fe3a74" class="bulleted-list">
        <li>Opens Windows Explorer from the current directory.
        </li>
      </ul>
    </li>
    <li><code>dir/b/s</code>
      <ul id="b0385688-ede4-4adb-ae7f-b83bff92b589" class="bulleted-list">
        <li>Lists directory content recursively, showing full paths.
        </li>
      </ul>
    </li>
  </ul>
<p>Links:
</p>
  <ul id="0f319f8b-964b-4258-9d58-a4cb3346061a" class="bulleted-list">
    <li><a href="http://ss64.com/nt/syntax-args.html">Parameters / Arguments at ss64</a>
    </li>
    <li><a href="http://ss64.com/nt/syntax-esc.html">Escape Characters, Delimiters and Quotes at ss64</a>
    </li>
    <li><a href="http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx">Using batch parameters at Microsoft</a>
    </li>
  </ul>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="command-line-arguments-6a6ffadba81b4cc6a979f7e1ee4ea4aa.html#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    </p><div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly>
  

  <p>
    </p><div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email">
    <input type="hidden" name="_template" value="box">
    <input type="text" name="_honey" class="noshow">
  

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"><div class="article chapter-toc svelte-1t851gm"><div class="mtoc-0 svelte-1t851gm"><b>Command-line arguments:</b></div></div></div>

    <div id="chapter-toc-wrapper">
      <hr>
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"><div class="article toc svelte-1ib47n1"><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">0</span><a href="introduction-846c7623625e434bb3c481641bf2e016.html">Introduction</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">1</span><a href="how-a-command-line-is-interpreted-cac61c915fce40c89a25c98ec229c5d6.html">How a command line is interpreted</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">2</span><a href="batch-reloading-98bc367236ef48559db589eddaa811ff.html">Batch reloading</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">3</span><a href="environment-variables-01b28cfb0b9b45409515334357d5f9bf.html">Environment variables</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">4</span><a href="switches-9e2a7d8c43bb46f29962b0d2f195e19c.html">Switches</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">5</span><a href="error-level-c70d88bae6d545b7a5b5ca99e777b409.html">Error level</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">6</span><a href="string-processing-20d44ad6fccd4a048e3464a4dd3d4570.html">String processing</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">7</span><b>Command-line arguments</b></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">8</span><a href="wildcards-2b952cca7aee49b2a4a709c4c4ad5aef.html">Wildcards</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">9</span><a href="user-input-5726d65b176c49ebb21d2daa271031f9.html">User input</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">10</span><a href="-percent-tilde-f4263820c2db41e399c77259970464f1.html">%~ (percent tilde)</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">11</span><a href="functions-f516efa981d9481ca4253d271451381d.html">Functions</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">12</span><a href="calculation-06c65868038c4e2ab21937d82bebc6c0.html">Calculation</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">13</span><a href="finding-files-af14c29c29d740609e9e8c887a2c3cb7.html">Finding files</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">14</span><a href="keyboard-shortcuts-af2ffcc6632c4dada420d99695ca6c10.html">Keyboard shortcuts</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">15</span><a href="paths-47408b417b4f4392a3bc79fe552b4895.html">Paths</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">16</span><a href="arrays-dc75afb35c164e29a9018d897be1f452.html">Arrays</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">17</span><a href="perl-one-liners-bdb9a0cee7bf4ca09a8bb650e6e2cad7.html">Perl one-liners</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">18</span><a href="limitations-09c168245f2e40d99e684733fb760091.html">Limitations</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">19</span><a href="built-in-commands-34f80a6dd2c84337951597d48e342fec.html">Built-in commands</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">20</span><a href="external-commands-f83d61795cb74a38996cd6085d1d63cb.html">External commands</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">21</span><a href="legal-credits-fde438abeea34c909d226a9d31209ee8.html">Legal & credits</a></div></div></div></div>
    </div>
  </div></body>
</html>