<!doctype html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../../assets/main.css" rel="stylesheet">
</head>
<body class="page">
<header class="page__header">
    <div class="page__header__left">
        <a id="link-home" href="../../index.html">
            &nbsp;Essential Books</a>
    </div>
</header>
<div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Type of triggers</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/3cd25b3edbb14b2cbbd70b3c7ecf1a13" rel="nofollow" target="_blank">suggest change</a>
</div>


      
  <h1 id="5af5f2b3-d842-4329-9503-f7b93f8898a7" class="">Trigger can be specified to fire:
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#5af5f2b3-d842-4329-9503-f7b93f8898a7" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h1>
  <ul id="bb1e3905-bd56-4e49-b91e-a95a53505e49" class="bulleted-list">
    <li>BEFORE the operation is attempted on a row - insert, update or delete;
    </li>
    <li>AFTER the operation has completed - insert, update or delete;
    </li>
    <li>INSTEAD OF the operation in the case of inserts, updates or deletes on a view.
    </li>
  </ul>
  <h1 id="306fc771-745a-4fda-aa1a-059a3300f095" class="">Trigger that is marked:
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#306fc771-745a-4fda-aa1a-059a3300f095" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h1>
  <ul id="c366f467-c9b4-4d21-9923-55bf6925ba64" class="bulleted-list">
    <li>FOR EACH ROW is called once for every row that the operation modifies;
    </li>
    <li>FOR EACH STATEMENT is called onde for any given operation.
    </li>
  </ul>
  <h1 id="52f039e4-0bf0-41be-b730-48f8ba251079" class="">Preparing to execute examples
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#52f039e4-0bf0-41be-b730-48f8ba251079" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h1>

<div class="code-box lang-SQL">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">company</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w">          </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">name</span><span class="w">        </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">created_at</span><span class="w">  </span><span class="k">TIMESTAMP</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">modified_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">NOW</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w">          </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">table_name</span><span class="w">  </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">table_id</span><span class="w">    </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">description</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">created_at</span><span class="w">  </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">NOW</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span></span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
  <h1 id="c23ab36e-c935-42a9-868c-ab9dba09bd32" class="">Single insert trigger
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#c23ab36e-c935-42a9-868c-ab9dba09bd32" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h1>
  <h2 id="dfa42f6a-5e07-42ec-acd4-d2cf34522f67" class="">Step 1: create your function
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#dfa42f6a-5e07-42ec-acd4-d2cf34522f67" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>

<div class="code-box lang-SQL">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">add_created_at_function</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">RETURNS</span><span class="w"> </span><span class="k">trigger</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="err">$</span><span class="n">BODY$</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">BEGIN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">NEW</span><span class="p">.</span><span class="n">created_at</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="n">NOW</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">END</span><span class="w"> </span><span class="err">$</span><span class="n">BODY$</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LANGUAGE</span><span class="w"> </span><span class="n">plpgsql</span><span class="p">;</span></span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
  <h2 id="16d29238-e3d9-4b3b-b2be-8d9a52e918af" class="">Step 2: create your trigger
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#16d29238-e3d9-4b3b-b2be-8d9a52e918af" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">CREATE TRIGGER add_created_at_trigger
</span></span><span class="line"><span class="cl">BEFORE INSERT
</span></span><span class="line"><span class="cl">ON company
</span></span><span class="line"><span class="cl">FOR EACH ROW
</span></span><span class="line"><span class="cl">EXECUTE PROCEDURE add_created_at_function();</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
  <h2 id="9b590e3e-8b36-4c52-b56e-2d139b2b7803" class="">Step 3: test it
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#9b590e3e-8b36-4c52-b56e-2d139b2b7803" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">INSERT INTO company (name) VALUES ('My company');
</span></span><span class="line"><span class="cl">SELECT * FROM company;</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
  <h1 id="aa19f522-39a6-49df-98ad-6194f3a12b6e" class="">Trigger for multiple purpose
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#aa19f522-39a6-49df-98ad-6194f3a12b6e" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h1>
  <h2 id="d480d24f-77a2-4bd8-8d2d-4b8a82a888a7" class="">Step 1: create your function
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#d480d24f-77a2-4bd8-8d2d-4b8a82a888a7" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">CREATE OR REPLACE FUNCTION add_log_function()
</span></span><span class="line"><span class="cl">  RETURNS trigger AS $BODY$
</span></span><span class="line"><span class="cl">DECLARE
</span></span><span class="line"><span class="cl">  vDescription TEXT;
</span></span><span class="line"><span class="cl">  vId INT;
</span></span><span class="line"><span class="cl">  vReturn RECORD;
</span></span><span class="line"><span class="cl">BEGIN
</span></span><span class="line"><span class="cl">    vDescription := TG_TABLE_NAME || ' ';
</span></span><span class="line"><span class="cl">     IF (TG_OP = 'INSERT') THEN
</span></span><span class="line"><span class="cl">        vId := NEW.id;
</span></span><span class="line"><span class="cl">        vDescription := vDescription || 'added. Id: ' || vId;
</span></span><span class="line"><span class="cl">        vReturn := NEW;
</span></span><span class="line"><span class="cl">    ELSIF (TG_OP = 'UPDATE') THEN
</span></span><span class="line"><span class="cl">        vId := NEW.id;
</span></span><span class="line"><span class="cl">        vDescription := vDescription || 'updated. Id: ' || vId;
</span></span><span class="line"><span class="cl">        vReturn := NEW;
</span></span><span class="line"><span class="cl">    ELSIF (TG_OP = 'DELETE') THEN
</span></span><span class="line"><span class="cl">        vId := OLD.id;
</span></span><span class="line"><span class="cl">        vDescription := vDescription || 'deleted. Id: ' || vId;
</span></span><span class="line"><span class="cl">        vReturn := OLD;
</span></span><span class="line"><span class="cl">    END IF;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    RAISE NOTICE 'TRIGER called on % - Log: %', TG_TABLE_NAME, vDescription;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    INSERT INTO log 
</span></span><span class="line"><span class="cl">        (table_name, table_id, description, created_at) 
</span></span><span class="line"><span class="cl">        VALUES
</span></span><span class="line"><span class="cl">        (TG_TABLE_NAME, vId, vDescription, NOW());
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    RETURN vReturn;
</span></span><span class="line"><span class="cl">END $BODY$
</span></span><span class="line"><span class="cl">  LANGUAGE plpgsql;</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
  <h2 id="2f42fa10-2234-4f1e-9b10-fdbbf8ba2ce1" class="">Step 2: create your trigger
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#2f42fa10-2234-4f1e-9b10-fdbbf8ba2ce1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">CREATE TRIGGER add_log_trigger
</span></span><span class="line"><span class="cl">AFTER INSERT OR UPDATE OR DELETE
</span></span><span class="line"><span class="cl">ON company
</span></span><span class="line"><span class="cl">FOR EACH ROW
</span></span><span class="line"><span class="cl">EXECUTE PROCEDURE add_log_function();</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
  <h2 id="5f37939d-83ad-4260-958a-3d2c111435f1" class="">Step 3: test it
  <a class="header-anchor" href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#5f37939d-83ad-4260-958a-3d2c111435f1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">INSERT INTO company (name) VALUES ('Company 1');
</span></span><span class="line"><span class="cl">INSERT INTO company (name) VALUES ('Company 2');
</span></span><span class="line"><span class="cl">INSERT INTO company (name) VALUES ('Company 3');
</span></span><span class="line"><span class="cl">UPDATE company SET name='Company new 2' WHERE name='Company 2';
</span></span><span class="line"><span class="cl">DELETE FROM company WHERE name='Company 1';
</span></span><span class="line"><span class="cl">SELECT * FROM log;</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="type-of-triggers-3cd25b3edbb14b2cbbd70b3c7ecf1a13.html#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    </p><div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly>
  

  <p>
    </p><div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email">
    <input type="hidden" name="_template" value="box">
    <input type="text" name="_honey" class="noshow">
  

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"><div class="article chapter-toc svelte-1t851gm"><div class="mtoc-0 svelte-1t851gm"><b>Triggers and Trigger Functions:</b></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="triggers-and-trigger-functions-1e18b6bea0534c10a34114904ec788d1.html">Triggers and Trigger Functions</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="basic-plpgsql-trigger-function-a245d6e39e7c4b23b2fce49b457ab27c.html">Basic PLpgSQL Trigger Function</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><b>Type of triggers</b></div></div></div>

    <div id="chapter-toc-wrapper">
      <hr>
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"><div class="article toc svelte-1ib47n1"><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">0</span><a href="getting-started-b656c2d9b7f041f99104f7870c3bd3c9.html">Getting Started</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">1</span><a href="json-support-49e8bfad122341c0a6af5fec9d248b3b.html">JSON Support</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">2</span><a href="role-management-5d4907832722485aa0f85c47511443f9.html">Role Management</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">3</span><a href="common-table-expressions-with-681a2c9efae74f189f80461c4c09c58a.html">Common Table Expressions WITH</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">4</span><a href="accessing-data-programatically-f25f5b0103a74c7d8e939426f864b292.html">Accessing Data Programatically</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">5</span><a href="backup-and-restore-6feaa1fce2a74554bc6cfd6fa87755f4.html">Backup and Restore</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">6</span><a href="table-creation-75f908151ace407381442933da6164c1.html">Table Creation</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">7</span><a href="insert-1b89e5745d0d4bdfab44b5312db9e0c9.html">INSERT</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">8</span><a href="update-0af4c7d78383485db40cd8742d4614ed.html">UPDATE</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">9</span><a href="dates-timestamps-and-intervals-c7bb4b02c1894ac9874a3063a6e701e9.html">Dates, Timestamps and Intervals</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">10</span><a href="aggregate-functions-0ceb6cef14f04b099f879e98af207550.html">Aggregate Functions</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">11</span><a href="programming-with-plpgsql-0c02c8f26e29480e9bb2cdeb1f224d96.html">Programming with PLPGSQL</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">12</span><a href="inheritance-c0eaf930378b47c0895c8a7b1ce51777.html">Inheritance</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">13</span><a href="high-availability-5d2d39b0a2fc4e769b2070d4267b34cc.html">High Availability</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">14</span><b>Triggers and Trigger Functions</b></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">15</span><a href="extension-dblink-and-postgres-fdw-1a613c3811be4622879f261a3852b802.html">EXTENSION dblink and postgres fdw</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">16</span><a href="window-functions-66100120d0d24226ab23554ee203d7db.html">Window Functions</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">17</span><a href="postgres-tips-and-tricks-ba264bb2630a4be6beb77d92d929a0ce.html">Postgres Tips and Tricks</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">18</span><a href="backup-script-for-a-production-db-5b31d6d9d8d344d785daedb02d8e7383.html">Backup script for a production DB</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">19</span><a href="comments-58746f677c4643f09125b5f23fcaace0.html">Comments</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">20</span><a href="export-to-csv-a31bb49fd2df4eec90a6864c51111958.html">Export to csv</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">21</span><a href="data-types-ae4c97208297442fbe50b7c9b974351b.html">Data Types</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">22</span><a href="recursive-queries-b6b11111255f4c388f25a412bc108e55.html">Recursive queries</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">23</span><a href="postgres-cryptographic-functions-468130e5ec364d5f995c0763643830c0.html">Postgres cryptographic functions</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">24</span><a href="event-triggers-502c5a791bd9465786c027fcaa48a9e0.html">Event Triggers</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">25</span><a href="select-5ec4fe9320664e62b48b247fa2451cf9.html">SELECT</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">26</span><a href="connect-from-java-ed4d52f8abc34faebd5e08974843aa30.html">Connect from Java</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">27</span><a href="find-string-length-b2abeec84aaa476999b6e9ab17e6ddda.html">Find String Length</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">28</span><a href="coalesce-2a19f9bae6844155becb0d4da3888f1c.html">COALESCE</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">29</span><a href="contributors-17c104490ab54f59b03c3db31a4b0d10.html">Contributors</a></div></div></div></div>
    </div>
  </div></body>
</html>