<!doctype html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../../assets/main.css" rel="stylesheet">
</head>
<body class="page">
<header class="page__header">
    <div class="page__header__left">
        <a id="link-home" href="../../index.html">
            &nbsp;Essential Books</a>
    </div>
</header>
<div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Drawing many translated scaled and rotated images quickly</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/c5572a859e444ed58b6fa709151ca330" rel="nofollow" target="_blank">suggest change</a>
</div>


      
<p>There are many situation where you want to draw an image that is rotated, scaled, and translated. The rotation should occur around the center of the image. This is the quickest way to do so on the 2D canvas. These functions a well suited to 2D games where the expectation is to render a few hundred even up to a 1000+ images every 60th of a second. (dependent on the hardware)
</p>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">// assumes that the canvas context is in ctx and in scope
</span></span><span class="line"><span class="cl">function drawImageRST(image, x, y, scale, rotation){
</span></span><span class="line"><span class="cl">    ctx.setTransform(scale, 0, 0, scale, x, y); // set the scale and translation
</span></span><span class="line"><span class="cl">    ctx.rotate(rotation);                       // add the rotation
</span></span><span class="line"><span class="cl">    ctx.drawImage(image, -image.width / 2, -image.height / 2); // draw the image offset by half its width and height
</span></span><span class="line"><span class="cl">}</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>A variant can also include the alpha value which is useful for particle systems.
</p>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">function drawImageRST_Alpha(image, x, y, scale, rotation, alpha){
</span></span><span class="line"><span class="cl">    ctx.setTransform(scale, 0, 0, scale, x, y); // set the scale and translation
</span></span><span class="line"><span class="cl">    ctx.rotate(rotation);                       // add the rotation
</span></span><span class="line"><span class="cl">    ctx.globalAlpha = alpha;
</span></span><span class="line"><span class="cl">    ctx.drawImage(image, -image.width / 2, -image.height / 2); // draw the image offset by half its width and height
</span></span><span class="line"><span class="cl">}</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>It is important to note that both functions leave the canvas context in a random state. Though the functions will not be affected other rendering my be. When you are done rendering images you may need to restore the default transform
</p>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">ctx.setTransform(1, 0, 0, 1, 0, 0); // set the context transform back to the default</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>If you use the alpha version (second example) and then the standard version you will have to ensure that the global alpha state is restored
</p>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">ctx.globalAlpha = 1;</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>An example of using the above functions to render some particles and the a few images
</p>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">// assume particles to contain an array of particles
</span></span><span class="line"><span class="cl">for(var i = 0; i &lt; particles.length; i++){
</span></span><span class="line"><span class="cl">    var p = particles[i];
</span></span><span class="line"><span class="cl">    drawImageRST_Alpha(p.image, p.x, p.y, p.scale, p.rot, p.alpha);
</span></span><span class="line"><span class="cl">    // no need to rest the alpha in the loop
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">// you need to reset the alpha as it can be any value 
</span></span><span class="line"><span class="cl">ctx.globalAlpha = 1;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">drawImageRST(myImage, 100, 100, 1, 0.5);  // draw an image at 100,100
</span></span><span class="line"><span class="cl">// no need to reset the transform 
</span></span><span class="line"><span class="cl">drawImageRST(myImage, 200, 200, 1, -0.5); // draw an image at 200,200 
</span></span><span class="line"><span class="cl">ctx.setTransform(1,0,0,1,0,0);            // reset the transform</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="drawing-many-translated-scaled-and-rotated-images-quickly-c5572a859e444ed58b6fa709151ca330.html#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    </p><div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly>
  

  <p>
    </p><div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email">
    <input type="hidden" name="_template" value="box">
    <input type="text" name="_honey" class="noshow">
  

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"><div class="article chapter-toc svelte-1t851gm"><div class="mtoc-0 svelte-1t851gm"><b>Getting started:</b></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="getting-started-with-html5-canvas-3af3b15e2fe74bcb886eda23527e0f62.html">Getting started with html5-canvas</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="creating-a-responsive-full-page-canvas-65ee886e6c274b3b8b05ced8ebcf0157.html">Creating a responsive full page canvas</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="detecting-mouse-position-on-the-canvas-fb27b95b0a27412793886f7f771688b5.html">Detecting mouse position on the canvas</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="canvas-size-and-resolution-e165c225aae949828b89c0ec332d9f37.html">Canvas size and resolution</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="how-to-add-the-html5-canvas-element-to-a-webpage-256ccbcc570947e892c113726e5bfcf7.html">How to add the Html5 Canvas Element to a webpage</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="simple-animation-with-2d-context-and-requestanimationframe-5cffdb4c97384f78aaa0e52963ef3021.html">Simple animation with 2D context and requestAnimationFrame</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><b>Drawing many translated scaled and rotated images quickly</b></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="image-cropping-using-canvas-0588a187bd5a4e6da1824b0128c424cb.html">Image cropping using canvas</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="the-tained-canvas-2137dc55b0604ef6b0fa7f3dd0d1350c.html">The Tained canvas</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="off-screen-canvas-d807763ce5c14c9e93c56e38d2c8b502.html">Off screen canvas</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="hello-world-6048bf4741f74d9282b434a891a8bbe7.html">Hello World</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="an-index-to-html5-canvas-capabilities-uses-5168c2ada0da4e5f8dcb7f672f153d5a.html">An index to Html5 Canvas Capabilities Uses</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="rotate-bca79bf0595f4cee83dc472f655bd643.html">Rotate</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="save-canvas-to-image-file-09a852b8ab3f4081bdae9943dd707081.html">Save canvas to image file</a></div></div></div>

    <div id="chapter-toc-wrapper">
      <hr>
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"><div class="article toc svelte-1ib47n1"><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">0</span><b>Getting started</b></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">1</span><a href="images-ba65754ede34461eb1e1560e2d6309e4.html">Images</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">2</span><a href="path-syntax-db570444b7a84c65af507de125251743.html">Path syntax</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">3</span><a href="media-types-and-the-canvas-4ce6605a6537475291ee3480df7bacb9.html">Media types and the canvas</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">4</span><a href="animation-43473e4727d0430a914dcd63a767322a.html">Animation</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">5</span><a href="collisions-and-intersections-c37198bed8f348ef8bfc2cebe79b5d8b.html">Collisions and intersections</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">6</span><a href="paths-041fccaeeb964fce95770aaf8da6dad2.html">Paths</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">7</span><a href="text-0d20929db8564186bfedfbeecbb675d5.html">Text</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">8</span><a href="clearing-the-screen-28d114e4408844fc827c5f73d6238ff8.html">Clearing the screen</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">9</span><a href="navigating-along-a-path-69ada749d57144f89e7e47f98efde9a1.html">Navigating along a path</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">10</span><a href="dragging-path-shapes-images-dd776e0ee2284dd699b4439d20e57076.html">Dragging path shapes images</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">11</span><a href="shadows-15ffc1665db0493fb2645df513042ee7.html">Shadows</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">12</span><a href="charts-diagrams-55c84186869841c98d2d873c9b4a19c9.html">Charts diagrams</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">13</span><a href="polygons-e6a83a07a60745f6884992715cb6dc6b.html">Polygons</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">14</span><a href="transformations-90e27c4187894f0499f3a04940f3821a.html">Transformations</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">15</span><a href="responsive-design-d29786c782594e778b8c65265f7b95e3.html">Responsive design</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">16</span><a href="compositing-de5b9aa74f444592b8f347684b3408b3.html">Compositing</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">17</span><a href="pixel-manipulation-ac5cc01d563d4c52a3602801411c5860.html">Pixel manipulation</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">18</span><a href="contributors-bdca4d70e7e644fe95706e68527f05d6.html">Contributors</a></div></div></div></div>
    </div>
  </div></body>
</html>