<!doctype html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../../assets/main.css" rel="stylesheet">
</head>
<body class="page">
<header class="page__header">
    <div class="page__header__left">
        <a id="link-home" href="../../index.html">
            &nbsp;Essential Books</a>
    </div>
</header>
<div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Justified paragraphs</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/6054d5e3b63949e38bde829935a68309" rel="nofollow" target="_blank">suggest change</a>
</div>


      
<p>Renders text as justified paragraphs. <strong>REQUIRES</strong> the example <strong>Justified text</strong>
</p>
  <h2 id="6aff6237-f78c-4a66-8243-3f50aad3d2ae" class="">Example render
  <a class="header-anchor" href="justified-paragraphs-6054d5e3b63949e38bde829935a68309.html#6aff6237-f78c-4a66-8243-3f50aad3d2ae" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>
<p>Top paragraph has setting.compact = true and bottom false and line spacing is 1.2 rather than the default 1.5. Rendered by code usage example bottom of this example.
</p>
<img class="img" src="http://localhost:8000/essential/htmlcanvas/img/42d7290e1ccf9fdda0774f2f88e96e106410f6fd.png">
<hr id="32069a1f-877f-4bae-b895-3175f74d2909">
  <h2 id="ea4f2b02-6043-4080-a68e-93604d11c62b" class="">Example code
  <a class="header-anchor" href="justified-paragraphs-6054d5e3b63949e38bde829935a68309.html#ea4f2b02-6043-4080-a68e-93604d11c62b" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>

<div class="code-box lang-JavaScript">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="c1">// Requires justified text extensions 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// code point A
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">CanvasRenderingContext2D</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fillJustifyText</span> <span class="o">!==</span> <span class="s2">"function"</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">       <span class="k">throw</span> <span class="k">new</span> <span class="nx">ReferenceError</span><span class="p">(</span><span class="s2">"Justified Paragraph extension missing requiered CanvasRenderingContext2D justified text extension"</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="kd">var</span> <span class="nx">maxSpaceSize</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// Multiplier for max space size. If greater then no justificatoin applied
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kd">var</span> <span class="nx">minSpaceSize</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span> <span class="c1">// Multiplier for minimum space size   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kd">var</span> <span class="nx">compact</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// if true then try and fit as many words as possible. If false then try to get the spacing as close as possible to normal
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kd">var</span> <span class="nx">lineSpacing</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">;</span> <span class="c1">// space between lines
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kr">const</span> <span class="nx">noJustifySetting</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1">// This setting forces justified text off. Used to render last line of paragraph.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="nx">minSpaceSize</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nx">maxSpaceSize</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="c1">// Parse vet and set settings object.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kd">var</span> <span class="nx">justifiedTextSettings</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">       <span class="kd">var</span> <span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="kd">var</span> <span class="nx">vetNumber</span> <span class="o">=</span> <span class="p">(</span><span class="nx">num</span><span class="p">,</span> <span class="nx">defaultNum</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="nx">num</span> <span class="o">=</span> <span class="nx">num</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">num</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="o">?</span> <span class="nx">num</span> <span class="o">:</span> <span class="nx">defaultNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">           <span class="k">return</span> <span class="nx">num</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">defaultNum</span> <span class="o">:</span> <span class="nx">num</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="p">}</span>
</span></span><span class="line"><span class="cl">       <span class="k">if</span><span class="p">(</span><span class="nx">settings</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">settings</span> <span class="o">===</span> <span class="kc">null</span><span class="p">){</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">       <span class="nx">compact</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">compact</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">compact</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="nx">compact</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">max</span> <span class="o">=</span> <span class="nx">vetNumber</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">maxSpaceSize</span><span class="p">,</span> <span class="nx">maxSpaceSize</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="nx">min</span> <span class="o">=</span> <span class="nx">vetNumber</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">minSpaceSize</span><span class="p">,</span> <span class="nx">minSpaceSize</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="nx">lineSpacing</span> <span class="o">=</span> <span class="nx">vetNumber</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">lineSpacing</span><span class="p">,</span> <span class="nx">lineSpacing</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="k">if</span><span class="p">(</span><span class="nx">min</span> <span class="o">&gt;</span> <span class="nx">max</span><span class="p">){</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">       <span class="nx">minSpaceSize</span> <span class="o">=</span> <span class="nx">min</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">maxSpaceSize</span> <span class="o">=</span> <span class="nx">max</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>        
</span></span><span class="line"><span class="cl">   <span class="kd">var</span> <span class="nx">getFontSize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">font</span><span class="p">){</span>  <span class="c1">// get the font size. 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="kd">var</span> <span class="nx">numFind</span> <span class="o">=</span> <span class="sr">/[0-9]+/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="kd">var</span> <span class="nx">number</span> <span class="o">=</span> <span class="nx">numFind</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">font</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">       <span class="k">if</span><span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">number</span><span class="p">)){</span>
</span></span><span class="line"><span class="cl">           <span class="k">throw</span> <span class="k">new</span> <span class="nx">ReferenceError</span><span class="p">(</span><span class="s2">"justifiedPar Cant find font size"</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="p">}</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">number</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="kd">function</span> <span class="nx">justifiedPar</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">stroke</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">       <span class="kd">var</span> <span class="nx">spaceWidth</span><span class="p">,</span> <span class="nx">minS</span><span class="p">,</span> <span class="nx">maxS</span><span class="p">,</span> <span class="nx">words</span><span class="p">,</span> <span class="nx">count</span><span class="p">,</span> <span class="nx">lines</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">lastLineWidth</span><span class="p">,</span> <span class="nx">lastSize</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">renderer</span><span class="p">,</span> <span class="nx">fontSize</span><span class="p">,</span> <span class="nx">adjSpace</span><span class="p">,</span> <span class="nx">spaces</span><span class="p">,</span> <span class="nx">word</span><span class="p">,</span> <span class="nx">lineWords</span><span class="p">,</span> <span class="nx">lineFound</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">spaceWidth</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="s2">" "</span><span class="p">).</span><span class="nx">width</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">minS</span> <span class="o">=</span> <span class="nx">spaceWidth</span> <span class="o">*</span> <span class="nx">minSpaceSize</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">maxS</span> <span class="o">=</span> <span class="nx">spaceWidth</span> <span class="o">*</span> <span class="nx">maxSpaceSize</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">words</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">" "</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">word</span> <span class="p">=&gt;</span> <span class="p">{</span>  <span class="c1">// measure all words.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>           <span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="nx">word</span><span class="p">).</span><span class="nx">width</span><span class="p">;</span>                
</span></span><span class="line"><span class="cl">           <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">               <span class="nx">width</span> <span class="o">:</span> <span class="nx">w</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">               <span class="nx">word</span> <span class="o">:</span> <span class="nx">word</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="p">};</span>
</span></span><span class="line"><span class="cl">       <span class="p">});</span>
</span></span><span class="line"><span class="cl">       <span class="c1">// count = num words, spaces = number spaces, spaceWidth normal space size
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="c1">// adjSpace new space size &gt;= min size. useSize Resulting space size used to render
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">lines</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">       <span class="c1">// create lines by shifting words from the words array until the spacing is optimal. If compact
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="c1">// true then will true and fit as many words as possible. Else it will try and get the spacing as
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="c1">// close as possible to the normal spacing
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="k">while</span><span class="p">(</span><span class="nx">words</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">           <span class="nx">lastLineWidth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">           <span class="nx">lastSize</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">           <span class="nx">lineFound</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">           <span class="c1">// each line must have at least one word.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>           <span class="nx">word</span> <span class="o">=</span> <span class="nx">words</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">           <span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">word</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">           <span class="nx">lineWords</span> <span class="o">=</span> <span class="p">[</span><span class="nx">word</span><span class="p">.</span><span class="nx">word</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">           <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">           <span class="k">while</span><span class="p">(</span><span class="nx">lineWidth</span> <span class="o">&lt;</span> <span class="nx">width</span> <span class="o">&amp;&amp;</span> <span class="nx">words</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span> <span class="c1">// Add words to line
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>               <span class="nx">word</span> <span class="o">=</span> <span class="nx">words</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">               <span class="nx">lineWidth</span> <span class="o">+=</span> <span class="nx">word</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">               <span class="nx">lineWords</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">word</span><span class="p">.</span><span class="nx">word</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">               <span class="nx">count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">               <span class="nx">spaces</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">               <span class="nx">adjSpace</span> <span class="o">=</span>  <span class="p">(</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">lineWidth</span><span class="p">)</span> <span class="o">/</span> <span class="nx">spaces</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">               <span class="k">if</span><span class="p">(</span><span class="nx">minS</span> <span class="o">&gt;</span> <span class="nx">adjSpace</span><span class="p">){</span>  <span class="c1">// if spacing less than min remove last word and finish line
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                   <span class="nx">lineFound</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                   <span class="nx">words</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">word</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                   <span class="nx">lineWords</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">               <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                   <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">compact</span><span class="p">){</span> <span class="c1">// if compact mode 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                       <span class="k">if</span><span class="p">(</span><span class="nx">adjSpace</span> <span class="o">&lt;</span> <span class="nx">spaceWidth</span><span class="p">){</span> <span class="c1">// if less than normal space width
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                           <span class="k">if</span><span class="p">(</span><span class="nx">lastSize</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                               <span class="nx">lastSize</span> <span class="o">=</span> <span class="nx">adjSpace</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                           <span class="p">}</span>
</span></span><span class="line"><span class="cl">                           <span class="c1">// check if with last word on if its closer to space width
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                           <span class="k">if</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">spaceWidth</span> <span class="o">-</span> <span class="nx">adjSpace</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">spaceWidth</span> <span class="o">-</span> <span class="nx">lastSize</span><span class="p">)){</span>
</span></span><span class="line"><span class="cl">                               <span class="nx">lineFound</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// yes keep it
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                           <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                               <span class="nx">words</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">word</span><span class="p">);</span>  <span class="c1">// no better fit if last word removes
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                               <span class="nx">lineWords</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                               <span class="nx">lineFound</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                           <span class="p">}</span>
</span></span><span class="line"><span class="cl">                       <span class="p">}</span>
</span></span><span class="line"><span class="cl">                   <span class="p">}</span>
</span></span><span class="line"><span class="cl">               <span class="p">}</span>
</span></span><span class="line"><span class="cl">               <span class="nx">lastSize</span> <span class="o">=</span> <span class="nx">adjSpace</span><span class="p">;</span> <span class="c1">// remember spacing 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>           <span class="p">}</span>
</span></span><span class="line"><span class="cl">           <span class="nx">lines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">lineWords</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">" "</span><span class="p">));</span> <span class="c1">// and the line
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="p">}</span>
</span></span><span class="line"><span class="cl">       <span class="c1">// lines have been worked out get font size, render, and render all the lines. last
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="c1">// line may need to be rendered as normal so it is outside the loop.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="nx">fontSize</span> <span class="o">=</span> <span class="nx">getFontSize</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">stroke</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">?</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeJustifyText</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="o">:</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillJustifyText</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">           <span class="nx">renderer</span><span class="p">(</span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">           <span class="nx">y</span> <span class="o">+=</span> <span class="nx">lineSpacing</span> <span class="o">*</span> <span class="nx">fontSize</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="p">}</span>
</span></span><span class="line"><span class="cl">       <span class="k">if</span><span class="p">(</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span> <span class="c1">// last line if left or start aligned for no justify
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>           <span class="k">if</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">===</span> <span class="s2">"left"</span> <span class="o">||</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">===</span> <span class="s2">"start"</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">               <span class="nx">renderer</span><span class="p">(</span><span class="nx">lines</span><span class="p">[</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">noJustifySetting</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">               <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureJustifiedText</span><span class="p">(</span><span class="s2">""</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">           <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">               <span class="nx">renderer</span><span class="p">(</span><span class="nx">lines</span><span class="p">[</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">           <span class="p">}</span>
</span></span><span class="line"><span class="cl">       <span class="p">}</span>
</span></span><span class="line"><span class="cl">       <span class="c1">// return details about the paragraph.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="nx">y</span> <span class="o">+=</span> <span class="nx">lineSpacing</span> <span class="o">*</span> <span class="nx">fontSize</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="nx">nextLine</span> <span class="o">:</span> <span class="nx">y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="nx">fontSize</span> <span class="o">:</span> <span class="nx">fontSize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="nx">lineHeight</span> <span class="o">:</span> <span class="nx">lineSpacing</span> <span class="o">*</span> <span class="nx">fontSize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="p">};</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// define fill
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kd">var</span> <span class="nx">fillParagraphText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">settings</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">       <span class="nx">justifiedTextSettings</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="nx">minSpaceSize</span> <span class="o">:</span> <span class="nx">minSpaceSize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="nx">maxSpaceSize</span> <span class="o">:</span> <span class="nx">maxSpaceSize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="p">};</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="nx">justifiedPar</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// define stroke
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kd">var</span> <span class="nx">strokeParagraphText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">settings</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">       <span class="nx">justifiedTextSettings</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="nx">minSpaceSize</span> <span class="o">:</span> <span class="nx">minSpaceSize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="nx">maxSpaceSize</span> <span class="o">:</span> <span class="nx">maxSpaceSize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="p">};</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="nx">justifiedPar</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="nx">CanvasRenderingContext2D</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fillParaText</span> <span class="o">=</span> <span class="nx">fillParagraphText</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="nx">CanvasRenderingContext2D</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">strokeParaText</span> <span class="o">=</span> <span class="nx">strokeParagraphText</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">})();</span></span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<blockquote id="85bbdf44-45ab-4ea0-b0ea-08564b2313ed" class="">NOTE this extends the CanvasRenderingContext2D prototype. If you do not wish this to happen use the example Justified text to work out how to change this example to be part of the global namespace.
</blockquote>
<blockquote id="74deea58-90c8-4373-a932-b90d00555c5a" class="">NOTE Will throw a ReferenceError if this example can not find the function CanvasRenderingContext2D.prototype.fillJustifyText
</blockquote>
  <h2 id="d9b57f00-3b7d-4f55-95d3-ee916e82309c" class="">How to use
  <a class="header-anchor" href="justified-paragraphs-6054d5e3b63949e38bde829935a68309.html#d9b57f00-3b7d-4f55-95d3-ee916e82309c" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>

<div class="code-box lang-JavaScript">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillParaText</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="p">[</span><span class="nx">settings</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeParaText</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="p">[</span><span class="nx">settings</span><span class="p">]);</span></span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>See <strong>Justified text</strong> for details on arguments. Arguments between <code>\[</code> and <code>\]</code> are optional.
</p>
<p>The <code>settings</code> argument has two additional properties.
</p>
  <ul id="9237886f-2f46-4d36-b502-f8f1b7855c30" class="bulleted-list">
    <li><strong>compact:</strong> Default <code>true</code>. If true tries to pack as many words as possible per line. If false the tries to get the word spacing as close as possible to normal spacing.
    </li>
    <li><strong>lineSpacing</strong> Default <code>1.5</code>. Space per line default <code>1.5</code> the distance from on line to the next in terms of font size
    </li>
  </ul>
<p>Properties missing from the settings object will default to their default values or to the last valid values. The properties will only be changed if the new values are valid. For <code>compact</code> valid values are only booleans <code>true</code> or <code>false</code> Truthy values are not considered valid.
</p>
  <h2 id="5d7b2f83-597d-431c-b4f1-8928474542d7" class="">Return object
  <a class="header-anchor" href="justified-paragraphs-6054d5e3b63949e38bde829935a68309.html#5d7b2f83-597d-431c-b4f1-8928474542d7" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>
<p>The two functions return an object containing information to help you place the next paragraph. The object contains the following properties.
</p>
  <ul id="224351ee-f8e9-4065-8718-1620df238c69" class="bulleted-list">
    <li><strong>nextLine</strong> Position of the next line after the paragraph pixels.
    </li>
    <li><strong>fontSize</strong> Size of the font. (please note only use fonts defined in pixels eg <code>14px arial</code>)
    </li>
    <li><strong>lineHeight</strong> Distance in pixels from one line to the next
    </li>
  </ul>
<p>This example uses a simple algorithm that works one line at to time to find the best fit for a paragraph. This does not mean that it the best fit (rather the algorithmâ€™s best) You may wish to improve the algorithm by creating a multi pass line algorithm over the generated lines. Moving words from the end of one line to the start of the next, or from the start back to the end. The best look is achieved when the spacing over the entire paragraph has the smallest variation and is the closest to the normal text spacing.
</p>
<p>As this example is dependent on the <strong>Justified text</strong> example the code is very similar. You may wish to move the two into one function. Replace the function <code>justifiedTextSettings</code> in the other example with the one used in this example. Then copy all the rest of the code from this example into the anonymous function body of the <strong>Justified text</strong> example. You will no longer need to test for dependencies found at <code>// Code point A</code> It can be removed.
</p>
<hr id="5f2f6a61-7627-4a7b-807a-b6d7d01cd02e">
  <h2 id="9ae497c7-cb75-4a41-a19a-5fca42de4dc4" class="">Usage example
  <a class="header-anchor" href="justified-paragraphs-6054d5e3b63949e38bde829935a68309.html#9ae497c7-cb75-4a41-a19a-5fca42de4dc4" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a>
  </h2>

<div class="code-box lang-JavaScript">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s2">"25px arial"</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">=</span> <span class="s2">"center"</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">center</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="o">-</span><span class="nx">left</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">size</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="s2">"Justified paragraph examples."</span><span class="p">,</span><span class="nx">center</span><span class="p">,</span><span class="nx">y</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">y</span><span class="o">+=</span> <span class="mi">30</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s2">"14px arial"</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">=</span> <span class="s2">"left"</span>
</span></span><span class="line"><span class="cl"><span class="c1">// set para settings
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">setting</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">maxSpaceSize</span> <span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">minSpaceSize</span> <span class="o">:</span> <span class="mf">0.5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">lineSpacing</span> <span class="o">:</span> <span class="mf">1.2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compact</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Show the left and right bounds.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="s2">"red"</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">size</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">size</span> <span class="o">*</span> <span class="mi">15</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">left</span><span class="p">,</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">size</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">size</span> <span class="o">*</span> <span class="mi">15</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">=</span> <span class="s2">"left"</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">"black"</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Draw paragraph
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillParaText</span><span class="p">(</span><span class="nx">para</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">setting</span><span class="p">);</span>  <span class="c1">// settings is remembered    
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Next paragraph
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">y</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">nextLine</span> <span class="o">+</span> <span class="nx">line</span><span class="p">.</span><span class="nx">lineHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">setting</span><span class="p">.</span><span class="nx">compact</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillParaText</span><span class="p">(</span><span class="nx">para</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">setting</span><span class="p">);</span></span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<blockquote id="a8ec3872-627a-47ac-a0d3-dd313975717d" class="">Note: For text aligned left or start the last line of tha paragraph will always have normal spacing. For all other alignments the last line is treated like all others.
</blockquote>
<blockquote id="b110caf8-86e0-499b-b14b-eee764fd3075" class="">Note: You can inset the start of the paragraph with spaces. Though this may not be consistent from paragraph to paragraph. It is always a good thing to learn what a function is doing and modifying it. An exercise would be to add a setting to the settings that indents the first line by a fixed amount. Hint the while loop will need to temporarily make the first word appear larger (+ indent) words[0].width += ? and then when rendering lines indent the first line.
</blockquote>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="justified-paragraphs-6054d5e3b63949e38bde829935a68309.html#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    </p><div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly>
  

  <p>
    </p><div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email">
    <input type="hidden" name="_template" value="box">
    <input type="text" name="_honey" class="noshow">
  

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"><div class="article chapter-toc svelte-1t851gm"><div class="mtoc-0 svelte-1t851gm"><b>Text:</b></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="text-808468aff8084d509a8e83c22a420eec.html">Text</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="drawing-text-b1168a3e02e84cd99560c43e0d765661.html">Drawing Text</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="formatting-text-d5d07bb0fc294c08b7abb30dea74d968.html">Formatting Text</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="wrapping-text-into-paragraphs-8c0c26e83a494b97a459bc37eec0e124.html">Wrapping text into paragraphs</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="draw-text-paragraphs-into-irregular-shapes-29c97fcb486c449193f7b69563b00990.html">Draw text paragraphs into irregular shapes</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="fill-text-with-an-image-e0785968095f47c8a184e9627c768987.html">Fill text with an image</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="rendering-text-along-an-arc.-1a4ae6db10104e76b69a87a803d10615.html">Rendering text along an arc.</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="text-on-curve-cubic-and-quadratic-beziers-e6638af33a164eda8c148cd412413d4e.html">Text on curve cubic and quadratic beziers</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="justified-text-6e2808c0749a440d83a4aef065ee2178.html">Justified text</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><b>Justified paragraphs</b></div></div></div>

    <div id="chapter-toc-wrapper">
      <hr>
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"><div class="article toc svelte-1ib47n1"><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">0</span><a href="getting-started-7d650957f57448d485d0f1426726d652.html">Getting started</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">1</span><a href="images-ba65754ede34461eb1e1560e2d6309e4.html">Images</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">2</span><a href="path-syntax-db570444b7a84c65af507de125251743.html">Path syntax</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">3</span><a href="media-types-and-the-canvas-4ce6605a6537475291ee3480df7bacb9.html">Media types and the canvas</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">4</span><a href="animation-43473e4727d0430a914dcd63a767322a.html">Animation</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">5</span><a href="collisions-and-intersections-c37198bed8f348ef8bfc2cebe79b5d8b.html">Collisions and intersections</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">6</span><a href="paths-041fccaeeb964fce95770aaf8da6dad2.html">Paths</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">7</span><b>Text</b></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">8</span><a href="clearing-the-screen-28d114e4408844fc827c5f73d6238ff8.html">Clearing the screen</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">9</span><a href="navigating-along-a-path-69ada749d57144f89e7e47f98efde9a1.html">Navigating along a path</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">10</span><a href="dragging-path-shapes-images-dd776e0ee2284dd699b4439d20e57076.html">Dragging path shapes images</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">11</span><a href="shadows-15ffc1665db0493fb2645df513042ee7.html">Shadows</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">12</span><a href="charts-diagrams-55c84186869841c98d2d873c9b4a19c9.html">Charts diagrams</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">13</span><a href="polygons-e6a83a07a60745f6884992715cb6dc6b.html">Polygons</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">14</span><a href="transformations-90e27c4187894f0499f3a04940f3821a.html">Transformations</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">15</span><a href="responsive-design-d29786c782594e778b8c65265f7b95e3.html">Responsive design</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">16</span><a href="compositing-de5b9aa74f444592b8f347684b3408b3.html">Compositing</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">17</span><a href="pixel-manipulation-ac5cc01d563d4c52a3602801411c5860.html">Pixel manipulation</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">18</span><a href="contributors-bdca4d70e7e644fe95706e68527f05d6.html">Contributors</a></div></div></div></div>
    </div>
  </div></body>
</html>