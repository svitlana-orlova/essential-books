<!doctype html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../../assets/main.css" rel="stylesheet">
</head>
<body class="page">
<header class="page__header">
    <div class="page__header__left">
        <a id="link-home" href="../../index.html">
            &nbsp;Essential Books</a>
    </div>
</header>
<div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Ignore only part of a file stub</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/49e0b81ef82c4d26a51a6d0c099cfcea" rel="nofollow" target="_blank">suggest change</a>
</div>


      
<p>Sometimes you may want to have local changes in a file you don’t want to commit or publish. Ideally local settings should be concentrated in a separate file that can be placed into <code>.gitignore</code>, but sometimes as a short-term solution it can be helpful to have something local in a checked-in file.
</p>
<p>You can make Git “unsee” those lines using clean filter. They won’t even show up in diffs.
</p>
<p>Suppose here is snippet from file <code>file1.c</code>:
</p>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">struct settings s;
</span></span><span class="line"><span class="cl">s.host = "localhost";
</span></span><span class="line"><span class="cl">s.port = 5653;
</span></span><span class="line"><span class="cl">s.auth = 1;
</span></span><span class="line"><span class="cl">s.port = 15653; // NOCOMMIT
</span></span><span class="line"><span class="cl">s.debug = 1; // NOCOMMIT
</span></span><span class="line"><span class="cl">s.auth = 0; // NOCOMMIT</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>You don’t want to publish <code>NOCOMMIT</code> lines anywhere.
</p>
<p>Create “nocommit” filter by adding this to Git config file like <code>.git/config</code>:
</p>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">[filter "nocommit"]
</span></span><span class="line"><span class="cl">    clean=grep -v NOCOMMIT</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>Add (or create) this to <code>.git/info/attributes</code> or <code>.gitmodules</code>:
</p>

<div class="code-box lang-Plain Text">
	<div>
	<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">file1.c filter=nocommit</span></span></code></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>
<p>And your NOCOMMIT lines are hidden from Git.
</p>
<p>Caveats:
</p>
  <ul id="1c20fac3-a80f-4311-aa1e-f535d52f2451" class="bulleted-list">
    <li>Using clean filter slows down processing of files, especially on Windows.
    </li>
    <li>The ignored line may disappear from file when Git updates it. It can be counteracted with a smudge filter, but it is trickier.
    </li>
    <li>Not tested on Windows
    </li>
  </ul>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="ignore-only-part-of-a-file-stub-49e0b81ef82c4d26a51a6d0c099cfcea.html#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    </p><div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly>
  

  <p>
    </p><div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email">
    <input type="hidden" name="_template" value="box">
    <input type="text" name="_honey" class="noshow">
  

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"><div class="article chapter-toc svelte-1t851gm"><div class="mtoc-0 svelte-1t851gm"><b>Ignoring files and folders:</b></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignoring-files-and-folders-dd79ffd3abcb4e0d8df180d202647136.html#6a3877f3-2b59-4e0f-858a-6f7b38c3eb3d">Ignoring files and directories with a .gitignore file</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignoring-files-and-folders-dd79ffd3abcb4e0d8df180d202647136.html#7eb2d945-4b75-41d2-a055-aad5f349546b">Examples</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignoring-files-and-folders-dd79ffd3abcb4e0d8df180d202647136.html#82670d1e-9b1c-4db4-8233-82e19805fba0">Other forms of .gitignore</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignoring-files-and-folders-dd79ffd3abcb4e0d8df180d202647136.html#e0640089-f1c6-4b72-8df4-6f0431ef949d">Cleaning up ignored files</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="checking-if-a-file-is-ignored-6294da1840a044a98d5543b61bd9e87c.html">Checking if a file is ignored</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="exceptions-in-a-.gitignore-file-464906a45e064c8a90d6dd4a5db6d6ff.html">Exceptions in a .gitignore file</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="a-global-.gitignore-file-5ff267616ae24cccbded75c656862218.html">A global .gitignore file</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignore-files-already-committed-to-a-git-repository-8fa98e9d6ddb4ae997f70a0c23239dc6.html">Ignore files already committed to a git repository</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignore-files-locally-without-committing-ignore-rules-63c08ff2aa0d478484764b5de4733d7e.html">Ignore files locally without committing ignore rules</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignore-a-file-in-any-directory-f0bf6200bcab44cc89efb4a123730bda.html">Ignore a file in any directory</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignoring-subsequent-changes-to-a-file-without-removing-it-38888f56c4754c938017ade7860eff18.html">Ignoring subsequent changes to a file without removing it</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignoring-files-in-subfolders-multiple-.gitignore-files-c9ae491ba25340c7aae9c052726b96ca.html">Ignoring files in subfolders, multiple .gitignore files</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="prefilled-.gitignore-templates-f10d100d383b454b9ef8ba22f7c9f83c.html">Prefilled .gitignore Templates</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="create-an-empty-folder-65959b91b0ca4716a3b7c2b0e16f2dce.html">Create an empty folder</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="find-files-ignored-by-.gitignore-3a1da42c0763488b9efe5ae6c836623c.html">Find files ignored by .gitignore</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><b>Ignore only part of a file stub</b></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="ignore-changes-in-tracked-files.-stub-260eb4eb45804ea0b899be63ad2253c2.html">Ignore changes in tracked files. stub</a></div><div class="mtoc-1 svelte-1t851gm"><span class="no svelte-1ib47n1">*</span><a href="clear-already-committed-files-but-included-in-.gitignore-e9ef4c15bee149df9d3d02372b831d4d.html">Clear already committed files but included in .gitignore</a></div></div></div>

    <div id="chapter-toc-wrapper">
      <hr>
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"><div class="article toc svelte-1ib47n1"><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">0</span><a href="getting-started-6a125e34a2b34705af0ac5e164ccfa24.html">Getting started</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">1</span><a href="committing-b3581026b0bb4248be87b5784c64f255.html">Committing</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">2</span><a href="browsing-the-history-76b17b2395a94e898f82ec8a3ec62a50.html">Browsing the history</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">3</span><a href="undoing-04ee78eba4e2451fa18f4b6132c7cd1d.html">Undoing</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">4</span><a href="staging-e3c469c11d8e447a97fa8f4b2670ad27.html">Staging</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">5</span><a href="git-diff-2c45ad9ee679465d83a9561229837a80.html">Git diff</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">6</span><a href="merging-df323286a5404216aaf6c85842881694.html">Merging</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">7</span><b>Ignoring files and folders</b></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">8</span><a href="working-with-remotes-fa96b97d1a964c338c2bfcdeb06002f5.html">Working with remotes</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">9</span><a href="submodules-399affdf5c774f40a2038b6a5de16654.html">Submodules</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">10</span><a href="aliases-9889cb019b9d43d8a05666c9bcb42680.html">Aliases</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">11</span><a href="rebasing-313c84ebdd9a43c8b39578d72c422514.html">Rebasing</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">12</span><a href="configuration-8481aef215de40b9aa1d6e9cc919952f.html">Configuration</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">13</span><a href="branching-853f7b3cf5b9463aad6d71114a0e45b9.html">Branching</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">14</span><a href="rev-list-6a384b9703614f4381c28537ed4702c0.html">rev-list</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">15</span><a href="squashing-98ad87b15a884d5c8a26b2e4ce89100b.html">Squashing</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">16</span><a href="cherry-picking-0c23d9627cec403c8e267e0c3d99f3cd.html">Cherry picking</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">17</span><a href="recovering-fcc2ce7a78974ae19be56d71e9091623.html">Recovering</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">18</span><a href="git-clean-8976333846544a9382aac14ea0da0a23.html">git clean</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">19</span><a href=".gitattributes-81dfe434dd0d4928aa7960cef0ee9e5d.html">.gitattributes</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">20</span><a href=".mailmap-d22ee6fd6d95424cbcc38ccee2d58c07.html">.mailmap</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">21</span><a href="different-workflows-2bd8ba8217f04cb9a3e53cffacb1c96a.html">Different workflows</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">22</span><a href="pulling-711b10b768c24da48501b8412d112f4e.html">Pulling</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">23</span><a href="hooks-55ea0a0e7756475f90734b7614f212f0.html">Hooks</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">24</span><a href="cloning-repositories-843837bd3d09465cab1017bd4b856e07.html">Cloning repositories</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">25</span><a href="stashing-19ee9c1fdb624f5d8a58791f695c4fbe.html">Stashing</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">26</span><a href="subtrees-8473b8bd2cb640debfe0357c55d8e3ef.html">Subtrees</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">27</span><a href="renaming-02737ac15e314f62ae045faa549ff9dd.html">Renaming</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">28</span><a href="pushing-e3e963bd42f241c8a10a15304cf07d5a.html">Pushing</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">29</span><a href="internals-a5e863d86a0349fb947f6790e50412eb.html">Internals</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">30</span><a href="git-tfs-1d5abacde9e5475494b25f01773829dd.html">git-tfs</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">31</span><a href="empty-directories-in-git-4119551da28c4c5a81b70c6960db1d9f.html">Empty directories in git</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">32</span><a href="git-svn-be77aee7333a48fea261d614ce3010a8.html">git-svn</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">33</span><a href="archive-2ba4525fdf9c49d8b6b05f0fb0cf39b9.html">Archive</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">34</span><a href="rewriting-history-with-filter-branc-3b81263745564f6db255bee991395792.html">Rewriting history with filter-branc</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">35</span><a href="migrating-to-git-9448471ca81b44aca3f647fdaf38e1c4.html">Migrating to git</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">36</span><a href="show-8a3306f44d2d4548bcb34b7baf2979ff.html">Show</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">37</span><a href="resolving-merge-conflicts-b6fd813b163f447c861e0daae8e1d522.html">Resolving merge conflicts</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">38</span><a href="bundles-008196e2a8754d4794615a8cfa36d190.html">Bundles</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">39</span><a href="display-commit-history-graphically-with-gitk-5671aa618485459d88253c0b83dda989.html">Display commit history graphically with gitk</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">40</span><a href="bisecting-to-find-faulty-commits-f7de7d0406a040bf8ac103fda0d4efa3.html">Bisecting to find faulty commits</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">41</span><a href="blaming-72b490464c5845b2891fd04b342f5222.html">Blaming</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">42</span><a href="git-revisions-syntax-ed5f332ef2c74e6ea8164934948332c8.html">Git revisions syntax</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">43</span><a href="worktrees-164391a5bae54865a5d58275f23cce37.html">Worktrees</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">44</span><a href="git-remote-1a2cc6a43b0e478183fe655db778b697.html">Git remote</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">45</span><a href="git-large-file-storage-c750110127d84177bec299b76fff0b7f.html">Git large file storage</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">46</span><a href="git-patch-ad133dbfea4a4d4f8f980120a30ce624.html">git patch</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">47</span><a href="git-statistics-77f16c7fe9e64678a25f074954c0edb0.html">git statistics</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">48</span><a href="git-send-email-1b824b7d8b0d41e1958ea4fb45cb0000.html">git send-email</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">49</span><a href="git-gui-clients-2a595f0643c14c60929adb83b0926241.html">git gui clients</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">50</span><a href="reflog-restoring-commits-not-shown-in-git-log-d86b019eba874d0b98b75c661b59a7f3.html">reflog - restoring commits not shown in git log</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">51</span><a href="tortoisegit-65c822a379b74e8d8d8220d4e1935be2.html">TortoiseGit</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">52</span><a href="external-merge-and-diff-tools-b5fdbb9a13a646b1845519157dec5b74.html">External merge and diff tools</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">53</span><a href="update-object-name-in-reference-57fec9be9f674bc39b8d934aad839637.html">Update object name in reference</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">54</span><a href="git-branch-name-on-bash-ubuntu-08b340f2d6434ca2ab30da708aad3b1e.html">Git branch name on Bash Ubuntu</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">55</span><a href="git-client-side-hooks-f1df31fb1b3643ae88281d647461169a.html">Git client-side hooks</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">56</span><a href="git-rerer-94ebeaf3c7324f828de0b88362a1e049.html">Git rerer</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">57</span><a href="change-git-repository-name-df5f15ed88854ec1bd45d8dcea529bda.html">Change git repository name</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">58</span><a href="git-tagging-5b770b239cb74edb81da5a5f3542755a.html">git tagging</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">59</span><a href="tidying-up-your-local-and-remote-repository-2164816ca43b44b4b528dab69ce86743.html">tidying up your local and remote repository</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">60</span><a href="diff-tree-8db67d22889d4aef96a12e1d18ab323a.html">diff tree</a></div></div><div class="toc-item"><div class="chapters-toc-item"><span class="no svelte-1ib47n1">61</span><a href="contributors-99d2b2ec937143379a894a25a15433d4.html">Contributors</a></div></div></div></div>
    </div>
  </div></body>
</html>